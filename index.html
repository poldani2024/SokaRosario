<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soka Gakkai Tracker</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

<!-- Encabezado (mantén tus clases y estilos originales) -->
<h1>Seguimiento Soka Gakkai</h1>
<!-- Barra superior / línea de estado -->
<div class="topbar">
  <!-- Contenedor visible solo si NO hay sesión -->
  <div id="login-form">
    Necesitás iniciar sesión con Google para acceder.
    <button id="googleLoginBtn" class="btn btn-primary">Ingresar con Google</button>
  </div>

  <!-- Contenedor visible solo si SÍ hay sesión -->
  <div id="user-info" style="display:none;">
    <span id="user-email"></span> — <strong id="role-badge"></strong>
    <button id="logoutBtn" class="btn btn-secondary" style="margin-left:8px;">Cerrar sesión</button>
    <a href="admin.html" class="link admin-only" style="margin-left:12px;">Administración</a>
  </div>
</div>

<!-- Personas registradas -->
<h2>Personas registradas</h2>

<!-- FILTROS: coloca estos IDs dentro de tu bloque/row de filtros -->
<div class="filters-row">
  <label>Han
    <select id="filtroHan"></select>
  </label>
  <label>Grupo
    <select id="filtroGrupo"></select>
  </label>
  <label>Estado
    <select id="filtroEstado">
      <option value="">Todos</option>
      <option>Miembro</option>
      <option>Amigo Soka</option>
      <option>Sakubuku</option>
    </select>
  </label>
  <label>Reuniones semanales
    <select id="filtroFreqSemanal">
      <option value="">Todas</option>
      <option>Frecuentemente</option>
      <option>Poco</option>
      <option>Nunca</option>
    </select>
  </label>
  <label>Zadankai
    <select id="filtroFreqZadankai">
      <option value="">Todas</option>
      <option>Frecuentemente</option>
      <option>Poco</option>
      <option>Nunca</option>
    </select>
  </label>
  <label>Búsqueda
    <input id="buscarTexto" type="text" placeholder="Nombre, Apellido o Email" />
  </label>
</div>

<!-- Acciones sobre grilla (usa tus clases) -->
<div class="actions-row">
  <!-- Si querés mantener oculto el input de import hasta que lo uses, podés dejarlo con display:none -->
  <input id="importCSV" type="file" accept=".csv" style="display:none;" />
  <button id="exportCSVBtn" class="btn btn-primary">Exportar CSV (filtrado)</button>
  <button id="newPersonaBtn" class="btn btn-success admin-only" style="display:none;">Nueva persona</button>
</div>

<!-- Tabla de personas: mantenemos tu tabla, solo añadimos thead/tbody e ID -->
<table id="personasTable" class="table table-striped">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Estado</th>
      <th>Han</th>
      <th>Grupo</th>
      <th>Reuniones semanales</th>
      <th>Zadankai</th>
      <th>Humanismo</th>
      <th>Zaimu</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Sección Persona: coloca IDs en los inputs dentro de tu form -->
<h2>Persona</h2>
<form id="miPerfilForm" class="form form-grid">
  <div class="grid">
    <label>Nombre <input id="firstName" type="text" /></label>
    <label>Apellido <input id="lastName" type="text" /></label>
    <label>Fecha de Nacimiento <input id="birthDate" type="date" /></label>
    <label>Domicilio <input id="address" type="text" /></label>
    <label>Localidad <input id="city" type="text" /></label>
    <label>Teléfono <input id="phone" type="tel" /></label>
    <label>Email <input id="email" type="email" /></label>
    <label>Estado
      <select id="status">
        <option>Miembro</option>
        <option>Amigo Soka</option>
        <option>Sakubuku</option>
      </select>
    </label>
    <label>Han <select id="hanSelect"></select></label>
    <label>Localidad del Han <input id="hanLocalidad" type="text" /></label>
    <label>Grupo de capacitación <select id="grupoSelect"></select></label>
    <label>Reuniones semanales
      <select id="frecuenciaSemanal">
        <option value="">Seleccionar...</option>
        <option>Frecuentemente</option>
        <option>Poco</option>
        <option>Nunca</option>
      </select>
    </label>
    <label>Zadankai
      <select id="frecuenciaZadankai">
        <option value="">Seleccionar...</option>
        <option>Frecuentemente</option>
        <option>Poco</option>
        <option>Nunca</option>
      </select>
    </label>
    <label><input id="suscriptoHumanismoSoka" type="checkbox" /> Suscripto a Humanismo Soka</label>
    <label><input id="realizaZaimu" type="checkbox" /> Realiza Zaimu</label>
  </div>
  <div class="actions-row">
    <button type="submit" class="btn btn-primary">Guardar</button>
    <button type="button" id="personaClearBtn" class="btn btn-secondary">Limpiar</button>
  </div>
</form>

<!-- Visitas -->
<h2>Visitas</h2>
<form id="visitaForm" class="form form-inline">
  <label>Persona <select id="visitaPersonaSelect"></select></label>
  <label>Fecha de visita <input id="visitaFecha" type="date" /></label>
  <label>Observaciones <textarea id="visitaObs" rows="3"></textarea></label>
  <button type="submit" class="btn btn-primary">Registrar visita</button>
</form>

<table id="visitasTable" class="table table-striped">
  <thead>
    <tr>
      <th>Persona</th>
      <th>Fecha</th>
      <th>Observaciones</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Footer -->
<p>Hecho con ❤️ — Soka Gakkai Tracker</p>

  <!-- SDK Firebase v8 (orden: app -> auth). No usar async para mantener orden -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <!-- Inicialización Firebase y lógica de app -->
  <script src="firebase.js"></script>
  <script src="app.js"></script>
</body>
</html>
